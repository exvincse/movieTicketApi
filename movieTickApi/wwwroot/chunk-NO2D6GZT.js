import{a as k}from"./chunk-QXZLALXF.js";import{a as R}from"./chunk-AN255T3T.js";import{b as T}from"./chunk-7ABVTXG4.js";import{$a as n,Ac as M,Bb as h,Ec as A,Jb as o,Kb as l,Lb as x,Rb as y,Tb as w,Ya as b,ab as s,ma as S,nb as I,q as C,qb as c,sb as t,tb as i,ub as v,xc as E}from"./chunk-K24PMR7C.js";import{a as f,b as _,g as D}from"./chunk-TSRGIXR5.js";var z=r=>({"background-image":r});function O(r,m){if(r&1&&(t(0,"div",1)(1,"div",2),v(2,"div",3),t(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7),o(7),i(),t(8,"div",8),o(9),i()(),t(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12),o(14,"\u7D1A\u5225"),i(),t(15,"div",13),v(16,"img",14),i()(),t(17,"div",11)(18,"div",12),o(19,"\u7247\u9577"),i(),t(20,"div",13),o(21),i()(),t(22,"div",11)(23,"div",12),o(24,"\u4E0A\u6620\u65E5"),i(),t(25,"div",13),o(26),i()(),t(27,"div",11)(28,"div",12),o(29,"\u7C21\u4ECB"),i(),t(30,"div",13),o(31),i()()()()()()()()),r&2){let e=h();n(2),c("ngStyle",w(7,z,"url(https://image.tmdb.org/t/p/w342"+e.movieDetail.poster_path+")")),n(5),l(e.movieDetail.title),n(2),l(e.movieDetail.original_title),n(7),c("src","assets/images/icons/rating/"+e.movieDetail.rateImg+".png",b),n(5),x("",e.movieDetail.runtime,"\u5206"),n(5),l(e.movieDetail.release_date),n(5),l(e.movieDetail.overview||"\u7121")}}var j=class r{constructor(m,e){this.tmdbRepositoryService=m;this.option=e}movieDetail={id:0,title:"",genres:"",director:"",cast:"",rate:"",rateImg:"",adult:!1,backdrop_path:"",belongs_to_collection:"",budget:0,homepage:"",imdb_id:"",original_language:"",original_title:"",overview:"",popularity:0,poster_path:"",production_companies:[],production_countries:[],release_date:"",revenue:0,runtime:0,spoken_languages:[],status:"",tagline:"",video:!1,vote_average:0,vote_count:0,origin_country:[]};ngAfterViewInit(){setTimeout(()=>{this.getMovieDetail()})}getMovieDetail(){return D(this,null,function*(){let m=k({from:"cn",to:"tw"}),e=this.option.data.id,d={language:"zh-TW"},{list:p,credits:g,rate:F}=yield C(this.tmdbRepositoryService.getMovieMergeDetail(e,d)),u=F.results.find(a=>a.iso_3166_1==="US"),N=g.crew.find(a=>a.job==="Director")?.name||"",V=g.cast.filter(a=>a.order<5).map(a=>a.name).join("\u3001")||"";switch(this.movieDetail=_(f({},p),{genres:m(p.genres.map(a=>a.name).join("\u3001")),director:N,cast:V,rate:u?u.release_dates[0].certification:"",rateImg:""}),this.movieDetail.rate){case"R":this.movieDetail.rateImg="rating_18";break;case"PG-13":this.movieDetail.rateImg="rating_12";break;case"15":this.movieDetail.rateImg="rating_15";break;default:this.movieDetail.rateImg="rating";break}})}static \u0275fac=function(e){return new(e||r)(s(R),s(T))};static \u0275cmp=S({type:r,selectors:[["app-movie-detail"]],standalone:!0,features:[y],decls:1,vars:1,consts:[["class","l-card l-card--popup",4,"ngIf"],[1,"l-card","l-card--popup"],[1,"c-movieCard","c-movieCard--popup"],[1,"c-movieCard__img","c-movieCard__img--detail",3,"ngStyle"],[1,"c-movieCard__content"],[1,"l-movieDetail"],[1,"l-movieDetail__head"],[1,"l-movieDetail__title"],[1,"l-movieDetail__subTitle"],[1,"l-movieDetail__content"],[1,"c-form","c-form--popup","c-form--column"],[1,"c-form__item"],[1,"c-form__label"],[1,"c-form__text"],["width","28","height","28","alt","","srcset","",3,"src"]],template:function(e,d){e&1&&I(0,O,32,9,"div",0),e&2&&c("ngIf",d.movieDetail.title)},dependencies:[A,E,M]})};export{j as a};
