import{v as d}from"./chunk-2F6OI5QL.js";import{c as g}from"./chunk-4QTMHVTB.js";import{A as u,B as n,C as a,Y as c,aa as f,fa as o,g as i,m as l,n as p}from"./chunk-K24PMR7C.js";var t={getIsLogin:"User/IsLogin",postLogin:"User/Login",postGoogleLogin:"User/GoogleLogin",postLogout:"User/Logout",getReFreshToken:"User/ReFreshToken",getUserProfile:"User/UserProfile",putUserProfile:"User/UserProfile",postSendMail:"User/SendMail",postRegisterAccount:"User/RegisterAccount",postValidOtp:"User/ValidOtp",postValidEmail:"User/ValidEmail",getLocation:"User/Location",putResetPassword:"User/ResetPassword"};var U=class r{constructor(e,s){this.restfulApiService=e;this.userStoreService=s}refreshTokenSubject=new i(null);refreshProgress=!1;getIsLogin(){return this.restfulApiService.get(t.getIsLogin)}postLogin(e){return this.restfulApiService.post(t.postLogin,e)}postGoogleLogin(e){return this.restfulApiService.post(t.postGoogleLogin,e)}postLogout(){return this.restfulApiService.post(t.postLogout,{})}getReFreshToken(){return this.refreshProgress===!1?(this.refreshProgress=!0,this.restfulApiService.get(t.getReFreshToken).pipe(c(e=>{this.refreshTokenSubject.next(e.result.accessToken),this.refreshProgress=!1}),n(e=>(this.refreshProgress=!1,this.refreshTokenSubject.error(e),p(()=>e))))):this.refreshTokenSubject.asObservable().pipe(u(e=>e!==null),a(e=>l({statusCode:200,message:"",result:{accessToken:e}})))}getUserProfile(){this.restfulApiService.get(t.getUserProfile).subscribe(e=>{this.userStoreService.setUserData(e.result)})}postRegisterAccount(e){return this.restfulApiService.post(t.postRegisterAccount,e)}postSendMail(e){return this.restfulApiService.post(t.postSendMail,e)}postValidOtp(e){return this.restfulApiService.post(t.postValidOtp,e)}postValidEmail(e){return this.restfulApiService.post(t.postValidEmail,e)}getLocation(){return this.restfulApiService.get(t.getLocation)}putUserProfile(e){return this.restfulApiService.put(t.putUserProfile,e)}putResetPassword(e){return this.restfulApiService.put(t.putResetPassword,e)}static \u0275fac=function(s){return new(s||r)(o(g),o(d))};static \u0275prov=f({token:r,factory:r.\u0275fac,providedIn:"root"})};export{U as a};
